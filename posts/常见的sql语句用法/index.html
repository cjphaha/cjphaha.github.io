<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>常见的sql语句用法 - 氕氘氚</title><meta name="Description" content=""><meta property="og:title" content="常见的sql语句用法" />
<meta property="og:description" content="SQL SQL分为两个部分，一个是操作语言（DML）。一个是数据定义语言（DDL） 查询和更新指令构成了SQL的DML部分 SELECT——从数据库表" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://chenjiapeng.cn/posts/%E5%B8%B8%E8%A7%81%E7%9A%84sql%E8%AF%AD%E5%8F%A5%E7%94%A8%E6%B3%95/" /><meta property="og:image" content="http://chenjiapeng.cn/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-03T13:33:59+08:00" />
<meta property="article:modified_time" content="2021-01-03T13:33:59+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://chenjiapeng.cn/logo.png"/>

<meta name="twitter:title" content="常见的sql语句用法"/>
<meta name="twitter:description" content="SQL SQL分为两个部分，一个是操作语言（DML）。一个是数据定义语言（DDL） 查询和更新指令构成了SQL的DML部分 SELECT——从数据库表"/>
<meta name="application-name" content="氕氘氚">
<meta name="apple-mobile-web-app-title" content="氕氘氚"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://chenjiapeng.cn/posts/%E5%B8%B8%E8%A7%81%E7%9A%84sql%E8%AF%AD%E5%8F%A5%E7%94%A8%E6%B3%95/" /><link rel="prev" href="http://chenjiapeng.cn/posts/myisam%E5%92%8Cinnodb%E7%9A%84%E5%8C%BA%E5%88%AB/" /><link rel="next" href="http://chenjiapeng.cn/posts/%E5%85%B3%E4%BA%8E%E5%A0%86%E5%86%85%E5%AD%98%E5%92%8C%E6%A0%88%E5%86%85%E5%AD%98/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "常见的sql语句用法",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/chenjiapeng.cn\/posts\/%E5%B8%B8%E8%A7%81%E7%9A%84sql%E8%AF%AD%E5%8F%A5%E7%94%A8%E6%B3%95\/"
        },"genre": "posts","keywords": "SQL","wordcount":  10389 ,
        "url": "http:\/\/chenjiapeng.cn\/posts\/%E5%B8%B8%E8%A7%81%E7%9A%84sql%E8%AF%AD%E5%8F%A5%E7%94%A8%E6%B3%95\/","datePublished": "2021-01-03T13:33:59+08:00","dateModified": "2021-01-03T13:33:59+08:00","publisher": {
            "@type": "Organization",
            "name": "氕氘氚"},"author": {
                "@type": "Person",
                "name": "氕氘氚"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="氕氘氚"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/avatar.png"
        data-srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x"
        data-sizes="auto"
        alt="/images/avatar.png"
        title="/images/avatar.png" />氕氘氚的博客</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/index.html"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="氕氘氚"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/avatar.png"
        data-srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x"
        data-sizes="auto"
        alt="/images/avatar.png"
        title="/images/avatar.png" />氕氘氚的博客</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/index.html" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">常见的sql语句用法</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>氕氘氚</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><i class="far fa-folder fa-fw"></i>数据库</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-01-03">2021-01-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 10389 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 21 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#ddl">DDL</a>
      <ul>
        <li><a href="#创建">创建</a></li>
        <li><a href="#外键">外键</a></li>
      </ul>
    </li>
    <li><a href="#dml">DML</a>
      <ul>
        <li><a href="#insert">insert</a></li>
        <li><a href="#select">select</a></li>
        <li><a href="#where">where</a></li>
        <li><a href="#insert-into-select">INSERT INTO SELECT</a></li>
        <li><a href="#insert-into-from">INSERT INTO FROM</a></li>
      </ul>
    </li>
    <li><a href="#day2">DAY2</a>
      <ul>
        <li><a href="#order-by">ORDER BY</a></li>
        <li><a href="#update">UPDATE</a></li>
        <li><a href="#update注意-warning">UPDATE注意 :warning:</a></li>
        <li><a href="#delette">DELETTE</a></li>
        <li><a href="#select-top">SELECT TOP</a></li>
        <li><a href="#sql-charlist通配符">SQL [Charlist]通配符</a></li>
        <li><a href="#别名">别名</a></li>
        <li><a href="#join">JOIN</a></li>
        <li><a href="#总结">总结</a></li>
        <li><a href="#union">UNION</a></li>
        <li><a href="#sql约束">SQL约束</a></li>
        <li><a href="#create-index">CREATE INDEX</a></li>
        <li><a href="#alter-table">ALTER TABLE</a></li>
        <li><a href="#auto-increment">AUTO INCREMENT</a></li>
        <li><a href="#sql函数">SQL函数</a></li>
        <li><a href="#sql通用数据类型">sql通用数据类型</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="sql">SQL</h1>
<blockquote>
<p>SQL分为两个部分，一个是操作语言（DML）。一个是数据定义语言（DDL）</p>
</blockquote>
<p>查询和更新指令构成了SQL的DML部分</p>
<ul>
<li>SELECT——从数据库表中获取数据</li>
<li>UPDATE——更新数据库表中的数据</li>
<li>DELETE——从数据库表中删除数据</li>
<li>INSERT INTO——向数据库表中插入数据</li>
</ul>
<p>SQL的数据定义语言（DDL）部分使我们有能力创建或删除表哥，我们也可以定义索引（键），规定表之间的链接，以及施加表间的约束（实际工作中很少会添加那么多约束，因为这样会导致查询效率很低）</p>
<p>SQL中最重要的DDL语句</p>
<ul>
<li>CREATE DATABASE——创建新数据库</li>
<li>ALTER DATABASE——修改数据库</li>
<li>CREATE TABLE——创建新表</li>
<li>ALTER TABLE——变更（改变）数据库表</li>
<li>DROP TABLE——删除表</li>
<li>CREATE INDEX——创建索引（搜索键）</li>
<li>DROP INDEX——删除索引</li>
</ul>
<h2 id="ddl">DDL</h2>
<h3 id="创建">创建</h3>
<p>创建表</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Websites</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">url</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">alexa</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">country</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span></code></pre></div><p>设置id为主键</p>
<ul>
<li>如果之前已经建好了表</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Websites</span><span class="w">
</span><span class="w"></span><span class="k">ADD</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">);</span><span class="w">
</span></code></pre></div><ul>
<li>如果没有建好表</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Websites</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">url</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">alexa</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">country</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span></code></pre></div><p>取消主键</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">DROP</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w">
</span></code></pre></div><p>把多个列设置为主键</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">pk_PersonID</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">Id_P</span><span class="p">,</span><span class="n">LastName</span><span class="p">)</span><span class="w">
</span></code></pre></div><h3 id="外键">外键</h3>
<p>添加外键</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="cm">/* 在Person表的id_P后面插入一个w_id*/</span><span class="w">
</span><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">w_id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">AFTER</span><span class="w"> </span><span class="n">id_P</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="cm">/* 把Persons中的w_id设置为外键，和Websites中的id做关联*/</span><span class="w">
</span><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">w_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">Websites</span><span class="p">(</span><span class="n">id</span><span class="p">);</span><span class="w">
</span></code></pre></div><p>取消外键</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">DROP</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w">
</span></code></pre></div><h2 id="dml">DML</h2>
<h3 id="insert">insert</h3>
<p>向表中插入数据</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="cm">/*向表中插入数据*/</span><span class="w">
</span><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="err">表名称</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="err">值</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">值</span><span class="mi">2</span><span class="p">,....)</span><span class="w">
</span><span class="w"></span><span class="cm">/*向指定列中插入数据*/</span><span class="w">
</span><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="p">(</span><span class="err">列</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">列</span><span class="mi">2</span><span class="p">,...)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="err">值</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">值</span><span class="mi">2</span><span class="p">,....)</span><span class="w">
</span></code></pre></div><p>如果没有指定要插入数据的列名必须要列出插入行的每一列数据</p>
<h3 id="select">select</h3>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="cm">/*选择全部数据*/</span><span class="w">
</span><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="err">表名</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="cm">/*选择部分数据*/</span><span class="w">
</span><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="err">列名</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="err">表名</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="cm">/*去掉重复的部分*/</span><span class="w">
</span><span class="w"></span><span class="n">SLECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="err">列名</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="err">表名</span><span class="p">;</span><span class="w">
</span></code></pre></div><p>distinct的使用方法如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Persons</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+----------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+----------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">234</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">四</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">三</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">五</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+----------+</span><span class="w">
</span><span class="w"></span><span class="mi">4</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>如果不加distinct</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Persons</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+----------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+----------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">234</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">四</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">三</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">五</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">五</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+----------+</span><span class="w">
</span><span class="w">
</span></code></pre></div><h3 id="where">where</h3>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;五&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+------+----------+-----------+-----------+-----------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Id_P</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">w_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">FirstName</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Address</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">City</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+------+----------+-----------+-----------+-----------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">237</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">五</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">王</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">花果山</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">连云港</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">238</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">五</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="err">王</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="err">泰山</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="err">泰安</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+------+----------+-----------+-----------+-----------+</span><span class="w">
</span><span class="w"></span><span class="mi">2</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">05</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>文本字段使用单引号引起来，数值字段不用引号</p>
<ul>
<li>一些常用的运算符</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">等于</td>
</tr>
<tr>
<td style="text-align:left">&lt;&gt;</td>
<td style="text-align:left">不等于。**注释：**在 SQL 的一些版本中，该操作符可被写成 !=</td>
</tr>
<tr>
<td style="text-align:left">&gt;</td>
<td style="text-align:left">大于</td>
</tr>
<tr>
<td style="text-align:left">&lt;</td>
<td style="text-align:left">小于</td>
</tr>
<tr>
<td style="text-align:left">&gt;=</td>
<td style="text-align:left">大于等于</td>
</tr>
<tr>
<td style="text-align:left">&lt;=</td>
<td style="text-align:left">小于等于</td>
</tr>
<tr>
<td style="text-align:left">BETWEEN</td>
<td style="text-align:left">在某个范围内</td>
</tr>
<tr>
<td style="text-align:left">LIKE</td>
<td style="text-align:left">搜索某种模式</td>
</tr>
<tr>
<td style="text-align:left">IN</td>
<td style="text-align:left">指定针对某个列的多个可能值</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>逻辑运算</p>
<p>AND: 与	同时满足两个条件的值</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">300</span><span class="p">;</span><span class="w">
</span></code></pre></div><p>OR:或	满足一个就可以了</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></code></pre></div><p>NOT:非	满足不包含该条件的值</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">30</span><span class="w">
</span></code></pre></div><p>这个相当于小于等于30</p>
<p>逻辑运算的优先级</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">OR</span><span class="w">
</span></code></pre></div></li>
<li>
<p>特殊条件</p>
<p>空值判断 is null</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="no">null</span><span class="w">
</span></code></pre></div><p>从Websites中选出alexa是空的一列</p>
<p>between and（在。。。之间的值）</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">3000</span><span class="w">
</span><span class="w"></span><span class="c1">-- 查询列中等于 5000，3000，1500 的值
</span></code></pre></div><p>in</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>like</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">LastName</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;M%&#39;</span><span class="w">
</span></code></pre></div><p>查询 Websites 表中 LastName 列中有李 的值，M 为要查询内容中的模糊信息。</p>
<ul>
<li><strong>%</strong> 表示多个字值，<strong>_</strong> 下划线表示一个字符；</li>
<li><strong>M%</strong> : 为能配符，正则表达式，表示的意思为模糊查询信息为 M 开头的。</li>
<li><strong>%M%</strong> : 表示查询包含M的所有内容。</li>
<li>**%M_** : 表示查询以M在倒数第二位的所有内容。</li>
</ul>
<p>&lsquo;%a&rsquo;   //以a结尾的数据</p>
<p>&lsquo;a%&rsquo;   //以a开头的数据</p>
<p>&lsquo;%a%&rsquo;   //含有a的数据</p>
<p>‘<em>a</em>’   //三位且中间字母是a的</p>
<p>&lsquo;_a&rsquo;   //两位且结尾字母是a的</p>
<p>&lsquo;a_&rsquo;   //两位且开头字母是a的</p>
</li>
</ul>
<p>两个比较特殊的WHERE子句子</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">studentNO</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="c1">--则会返回一个空集，因为每一行记录 WHERE 都返回 false。
</span><span class="c1"></span><span class="k">SELECT</span><span class="w">  </span><span class="n">studentNO</span><span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="c1">--返回 student 表所有行中 studentNO 列的值。因为每一行记录 WHERE 都返回 true。
</span><span class="c1"></span><span class="w">
</span></code></pre></div><h3 id="insert-into-select">INSERT INTO SELECT</h3>
<blockquote>
<p>insert into select可以从一个表中复制信息到另外一个表</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w">  </span><span class="p">(</span><span class="err">准备好的表</span><span class="p">)</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="err">（或者取用自己想要的结构）</span><span class="k">from</span><span class="w"> </span><span class="err">表名</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="err">各种条件</span><span class="w">
</span></code></pre></div><h3 id="insert-into-from">INSERT INTO FROM</h3>
<p>也可以从一个表中复制信息到另外一个表，但是目标表不能存在，在插入数据的时候会自动建表</p>
<p>创建一个表并且从另外一个表复制数据</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Websites_copy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites_copy</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>Websites_copy就是新的表</p>
<p>如果只是复制结构的话</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Websites_copy_struct</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="mi">1</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="w">
</span></code></pre></div><hr>
<h2 id="day2">DAY2</h2>
<h3 id="order-by">ORDER BY</h3>
<p>websites表的结构如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>按照alexa排序</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">alexa</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>默认是升序，也可以降序</p>
<p>降序排列：</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------------------+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------------------+-------+---------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------------------+-------+---------+
</span><span class="c1"></span><span class="mi">5</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">05</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h3 id="update">UPDATE</h3>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">UPDATE</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="kt">SET</span><span class="w"> </span><span class="n">alexa</span><span class="o">=</span><span class="s1">&#39;20&#39;</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="mi">1001</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h3 id="update注意-warning">UPDATE注意 :warning:</h3>
<p>如果update后面没有跟where语句，所有的数据都会发生改变，比如</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">UPDATE</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="kt">SET</span><span class="w"> </span><span class="n">alexa</span><span class="o">=</span><span class="s1">&#39;5000&#39;</span><span class="p">,</span><span class="n">country</span><span class="o">=</span><span class="s1">&#39;us&#39;</span><span class="p">;</span><span class="w">
</span></code></pre></div><p>这样就会把表中所有的数据中的alex变成5000，country变成us</p>
<p>执行没有 WHERE 子句的 UPDATE 要慎重，再慎重。</p>
<p>在 MySQL 中可以通过设置 <strong>sql_safe_updates</strong> 这个自带的参数来解决，当该参数开启的情况下，你必须在update 语句后携带 where 条件，否则就会报错。</p>
<p><strong>set sql_safe_updates=1;</strong> 表示开启该参数</p>
<h3 id="delette">DELETTE</h3>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="c1">-- 基本用法
</span><span class="c1"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">Websites</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1006</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">alibaba</span><span class="p">.</span><span class="n">com</span><span class="w">  </span><span class="o">|</span><span class="w">    </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sony</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jp</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1008</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">honda</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">94</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jp</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">8</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"> 
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">alexa</span><span class="o">=</span><span class="mi">94</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="nf">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>和update一样如果后面不加where参数的话，所有的数据都会被删除</p>
<h4 id="拓展droptruncatedelete的区别">拓展：DROP，TRUNCATE，DELETE的区别</h4>
<p><strong>DROP</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">DROP</span><span class="w"> </span><span class="n">test</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="c1">-- 可以删除表test，并且释放空间，将test删除的一干二净
</span></code></pre></div><p><strong>TRUNCATE</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">TRUNCATE</span><span class="w"> </span><span class="n">test</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="c1">-- 删除表test中的内容，并且释放空间，但不删除表的定义，表的结构还在
</span></code></pre></div><p><strong>DELETE</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">alexa</span><span class="o">=</span><span class="mi">94</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="c1">-- 删除单条数据
</span><span class="c1"></span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w">
</span><span class="w"></span><span class="c1">-- 删除整个表的数据，不释放空间，保留表的定义
</span></code></pre></div><h3 id="select-top">SELECT TOP</h3>
<blockquote>
<p>select top字句用于规定要返回的记录的数目，对于大型表来说，是非常有用的</p>
</blockquote>
<blockquote>
<p>但是也不是所有的数据库系统都支持SELCET TOP语句，Mysql支持limit语句来选去指定的条数数据</p>
</blockquote>
<p><strong>Mysql</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">SELECT</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+-------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+-------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+-------+</span><span class="w">
</span></code></pre></div><h4 id="select-top-precent">SELECT TOP PRECENT</h4>
<p>Sql-server里面可以设置百分比</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">SELECT</span><span class="w"> </span><span class="n">TOP</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="n">PERCENT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="p">;</span><span class="w">
</span></code></pre></div><p>返回前50%</p>
<h3 id="sql-charlist通配符">SQL [Charlist]通配符</h3>
<blockquote>
<p>Mysql中使用REGEXP或者NOT REGEXP运算符（或者RLIKE和NOT RLIKE）来操作正则表达式</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">REGEXP</span><span class="w"> </span><span class="s1">&#39;^[j]&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+-----------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+-----------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sony</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jp</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+-----------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c1">-- 返回网站的国家中以j开头的
</span><span class="c1"></span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">REGEXP</span><span class="w"> </span><span class="s1">&#39;^[j-u]&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sony</span><span class="p">.</span><span class="n">com</span><span class="w">  </span><span class="o">|</span><span class="w">    </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jp</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">3</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c1">-- 返回j-u之间的
</span><span class="c1"></span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">REGEXP</span><span class="w"> </span><span class="s1">&#39;^[^j-u]&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1006</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">alibaba</span><span class="p">.</span><span class="n">com</span><span class="w">  </span><span class="o">|</span><span class="w">    </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">4</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c1">-- 不以j-u之间开头的
</span></code></pre></div><h3 id="别名">别名</h3>
<blockquote>
<p>通过使用SQL，可以为表名或者列名指定别名，使可读性更强</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="c1">-- 查询到的alexa设置为排名
</span><span class="c1"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">排名</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">websites</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+--------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="err">排名</span><span class="w">   </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+--------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">     </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">      </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">     </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">     </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+--------+</span><span class="w">
</span><span class="w"></span><span class="mi">7</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h3 id="join">JOIN</h3>
<blockquote>
<p>JOIN把来自两个或者多个表的行结合起来，基于这些表之间的共同字段</p>
</blockquote>
<p><!-- raw HTML omitted --></p>
<p>新建一个access_log表</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">access_log</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">aid</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">site_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">date</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">231</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">871</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">456</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">496</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">2131</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">56</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="c1">-- 为了方便对照，把Websites表也打印下来
</span><span class="c1"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">alexa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">20</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">     </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1006</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">alibaba</span><span class="p">.</span><span class="n">com</span><span class="w">  </span><span class="o">|</span><span class="w">    </span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sony</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">    </span><span class="mi">60</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">jp</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">7</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h4 id="inner-join">INNER JOIN</h4>
<blockquote>
</blockquote>
<p><!-- raw HTML omitted --></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">Websites</span><span class="p">.</span><span class="n">url</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="n">count</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="kt">date</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="w"> </span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">access_log</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="o">=</span><span class="n">access_log</span><span class="p">.</span><span class="n">site_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">date</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">   </span><span class="mi">231</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">871</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">   </span><span class="mi">456</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">   </span><span class="mi">496</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="mi">6</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h4 id="left-join">LEFT JOIN</h4>
<blockquote>
<p>返回左边表的所有行，即使右表（table）中没有匹配。</p>
<p>如果右表中没有匹配，则结果为null</p>
</blockquote>
<p><!-- raw HTML omitted --></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">Websites</span><span class="p">.</span><span class="n">url</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="n">count</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="kt">date</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">access_log</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="o">=</span><span class="n">access_log</span><span class="p">.</span><span class="n">site_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">date</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">   </span><span class="mi">231</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">   </span><span class="mi">456</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">   </span><span class="mi">496</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">871</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1006</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">alibaba</span><span class="p">.</span><span class="n">com</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sony</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="mi">10</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>inner join的一个变种</p>
<p><!-- raw HTML omitted --></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">Websites</span><span class="p">.</span><span class="n">url</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="n">count</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="kt">date</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">access_log</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="o">=</span><span class="n">access_log</span><span class="p">.</span><span class="n">site_id</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">access_log</span><span class="p">.</span><span class="n">site_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="no">NULL</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+--------------------+-------+------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">date</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+--------------------+-------+------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1002</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">   </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1004</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">apple</span><span class="p">.</span><span class="n">com</span><span class="w">   </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1006</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">alibaba</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1007</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sony</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+--------------------+-------+------+</span><span class="w">
</span><span class="w"></span><span class="mi">4</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h4 id="full-outer-join">FULL OUTER JOIN</h4>
<blockquote>
<p>主要坐标和右表其中一个表中存在匹配，则返回行</p>
</blockquote>
<blockquote>
<p>Mysql暂时不支持全full outer join，可以用left join + right join来实现</p>
</blockquote>
<p>![image-20201228200939220](/Users/cjp/Library/Application Support/typora-user-images/image-20201228200939220.png)</p>
<h4 id="right-join">RIGHT JOIN</h4>
<blockquote>
<p>从右表返回所有的行，即使左表没有匹配，如果左表没有匹配，则结果为null</p>
</blockquote>
<p><!-- raw HTML omitted --></p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">Websites</span><span class="p">.</span><span class="n">url</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="n">count</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="kt">date</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">access_log</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="o">=</span><span class="n">access_log</span><span class="p">.</span><span class="n">site_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">date</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w">   </span><span class="mi">231</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">871</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">   </span><span class="mi">456</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bing</span><span class="p">.</span><span class="n">com</span><span class="w">     </span><span class="o">|</span><span class="w">   </span><span class="mi">496</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w">                </span><span class="o">|</span><span class="w">  </span><span class="mi">2131</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">56</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+---------------------+-------+---------------------+</span><span class="w">
</span></code></pre></div><p>Right join的变种</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">Websites</span><span class="p">.</span><span class="n">url</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="n">count</span><span class="p">,</span><span class="n">access_log</span><span class="p">.</span><span class="kt">date</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">access_log</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="o">=</span><span class="n">access_log</span><span class="p">.</span><span class="n">site_id</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">Websites</span><span class="p">.</span><span class="n">id</span><span class="w">
</span><span class="w"></span><span class="k">IS</span><span class="w"> </span><span class="no">NULL</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">date</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">2131</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">56</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+------+-------+---------------------+</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><h3 id="总结">总结</h3>
<ul>
<li>inner join：如果表中至少有一个匹配，则返回行</li>
<li>left join：即使右表中没有匹配，也从左表返回所有行</li>
<li>right join 即使左表没有匹配，也从右表返回所有的行</li>
<li>full join 只要其中有一个表存在匹配，则返回行（mysql不支持）</li>
</ul>
<p>join中on和where条件的区别</p>
<p>1、on条件是在生成临时表时使用的条件，它不管是on中的条件都会返回左边表的记录</p>
<p>2、where条件时在临时表生成好后，再对临时表进行过滤的条件。这时已经没有left join的含义（必须返回左边表中的记录了）条件不为真的就全部过滤掉。</p>
<p>left join ,right join,full join不管on上的条件是否为真，都会返回left或者right表中的记录，full则具有left和right的特性的并集，inner join没有这个特殊性，条件放在on或者where中，返回的结果是相同的。</p>
<h3 id="union">UNION</h3>
<blockquote>
<p>union操作符用来合并两个或者多个select语句的结果</p>
</blockquote>
<p>下面新建一个apps表</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="nf">apps</span><span class="p">(</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="kt">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">app_name</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">apps</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&#34;QQ&#34;</span><span class="p">,</span><span class="s2">&#34;http://qq.com&#34;</span><span class="p">,</span><span class="s2">&#34;cn&#34;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">apps</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s2">&#34;搜狐&#34;</span><span class="p">,</span><span class="s2">&#34;http://souhu.com&#34;</span><span class="p">,</span><span class="s2">&#34;cn&#34;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">apps</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s2">&#34;bilibili&#34;</span><span class="p">,</span><span class="s2">&#34;http://bilibili.com&#34;</span><span class="p">,</span><span class="s2">&#34;cn&#34;</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">apps</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+----+----------+---------------------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">app_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">url</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+----+----------+---------------------+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">QQ</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">qq</span><span class="p">.</span><span class="n">com</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">搜狐</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">souhu</span><span class="p">.</span><span class="n">com</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">bilibili</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bilibili</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+----+----------+---------------------+---------+</span><span class="w">
</span><span class="w"></span><span class="c1">-- 查询apps和websites中的所有国家
</span><span class="c1"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">apps</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">country</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">jp</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">3</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>union默认会去重，如果想要展示所有的，可以用UNION ALL</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">apps</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w">
</span><span class="w"></span><span class="n">country</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+---------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">cn</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">jp</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">us</span><span class="w">      </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+---------+</span><span class="w">
</span><span class="w"></span><span class="mi">10</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></code></pre></div><p>注意点 :tipping_hand_man:</p>
<p>在使用UNION命令的时候只能在最后使用ORDER BY命令，是将两个查询结果合并在一起的时候<strong>再</strong>进行排序</p>
<h3 id="sql约束">SQL约束</h3>
<blockquote>
<p>约束的英文名是Constraints</p>
<p>SQL约束用于规定表中的数据规则，如果存在违反约束的数据行为，行为会被约束终止。</p>
<p>约束可以在创建表时规定（通过CREATE TABLE语句），或者在创建表之后通过ALTER TABLE语句</p>
</blockquote>
<p>语法</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">table_name</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">column_name1</span><span class="w"> </span><span class="n">data_type</span><span class="p">(</span><span class="k">size</span><span class="p">)</span><span class="w"> </span><span class="k">constraint_name</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">column_name2</span><span class="w"> </span><span class="n">data_type</span><span class="p">(</span><span class="k">size</span><span class="p">)</span><span class="w"> </span><span class="k">constraint_name</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">column_name3</span><span class="w"> </span><span class="n">data_type</span><span class="p">(</span><span class="k">size</span><span class="p">)</span><span class="w"> </span><span class="k">constraint_name</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="p">....</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span></code></pre></div><p>常见的约束有如下几种</p>
<ul>
<li>NOT NULL——某列不能存储空值</li>
<li>UNIQUE———保证某列的每行必须有一个唯一的值</li>
<li>PRIMARY KEY—NOT NULL和QUNIQUE结合，保证某一列既不为空，也唯一，有助于更容易的找到表中的一个特定的记录（主键）</li>
<li>FOREIGN KEY—保证一个表中的数据匹配另一个表中的值的参照完整性（外键）</li>
<li>CHECK————保证列中的值符合指定的条件</li>
<li>DEFAULT———规定没有给列赋值时的默认值</li>
</ul>
<h4 id="not-null">NOT NULL</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 创建表时的使用方法
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">    </span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 创建表后添加
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">MODIFY</span><span class="w"> </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 删除NOT NULL
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">MODIFY</span><span class="w"> </span><span class="n">Age</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span></code></pre></div><h4 id="unique">UNIQUE</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 创建
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">P_Id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">Address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">City</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 创建多个约束
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">uc_PersonID</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="p">,</span><span class="n">LastName</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="c1">-- 这一步操作之后相当于有了一个uc_PersonID索引
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1">-- 撤销约束
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">DROP</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">uc_PersonID</span><span class="w">
</span></code></pre></div><h4 id="primary-key">PRIMARY KEY</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 还是以persons表为例，在初始化的时候添加主键
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">P_Id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">Address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">City</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="c1">-- CONSTRAINT pk_PersonID PRIMARY KEY (P_Id,LastName) 多个列共同组成主键
</span><span class="c1"></span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 创建表之后的修改语法
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">ADD</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">pk_PersonID</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="p">,</span><span class="n">LastName</span><span class="err">）</span><span class="w">
</span><span class="w">
</span><span class="w">                                       
</span><span class="w"></span><span class="c1">-- 撤销PRIMARY KEY
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">DROP</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w">
</span></code></pre></div><h4 id="poreign-key">POREIGN KEY</h4>
<blockquote>
<p>标准解释：一个表中的 FOREIGN KEY 指向另一个表中的 UNIQUE KEY(唯一约束的键)。</p>
<p>FOREIGN KEY可以用于预防破坏表之间的链接行为</p>
<p>可以防止非法数据插入外键列</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- orders创建时在“P_id”列上创建PROEIGN KEY约束
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Orders</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">O_Id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">OrderNo</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">P_Id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">O_Id</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">Persons</span><span class="p">(</span><span class="n">P_Id</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 创建表之后添加
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Orders</span><span class="w">
</span><span class="w"></span><span class="k">ADD</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">Persons</span><span class="p">(</span><span class="n">P_Id</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 撤销FOREIGN KEY约束
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Orders</span><span class="w">
</span><span class="w"></span><span class="k">DROP</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">fk_PerOrders</span><span class="w">
</span></code></pre></div><h4 id="check">CHECK</h4>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 下面的表在创建persons的时候限制住了P_id必须大于0
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">P_Id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">Address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">City</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="c1">-- CONSTRAINT chk_Person CHECK (P_Id&gt;0 AND City=&#39;Sandnes&#39;) 定义多个约束
</span><span class="c1"></span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 如果表已经创建了
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">ADD</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">P_Id</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c1">-- 撤销CHECK
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">DROP</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="n">chk_Person</span><span class="w">
</span></code></pre></div><h4 id="default">DEFAULT</h4>
<blockquote>
<p>default约束用于向列中插入默认值，如果没有规定其他的值，那么会将默认值添加到所有的新纪录</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- city的默认值是南京
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w">    </span><span class="n">P_Id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w">    </span><span class="n">Address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w">    </span><span class="n">City</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;南京&#39;</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 如果表已经创建好了
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="n">City</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;SANDNES&#39;</span><span class="w">
</span><span class="w"></span><span class="c1">-- 撤销
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="n">City</span><span class="w"> </span><span class="k">DROP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w">
</span></code></pre></div><h3 id="create-index">CREATE INDEX</h3>
<blockquote>
<p>CREATE INDEX语句用于在表中创建索引，在不读取整个表的情况下，索引数据库应用程序可以更快的查找数据</p>
</blockquote>
<p>mysql的索引结构使用的是B+树，B+树高都比较低，时间复杂度低，每个节点只存放指针，所有的数据都在叶子结点中，查找速度快</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 在persons表中建立一个索引
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">my_index</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">persons</span><span class="p">(</span><span class="n">city</span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 在persons表中建立唯一索引
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">my_index</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">persons</span><span class="p">(</span><span class="n">city</span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 在两个列上建立索引
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">my_index</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="n">LastName</span><span class="p">,</span><span class="w"> </span><span class="n">FirstName</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 撤销索引
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="k">DROP</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">my_index</span><span class="w">
</span></code></pre></div><h3 id="alter-table">ALTER TABLE</h3>
<blockquote>
<p>ALTER TABLE语句用来在已有表中添加、删除或者修改列</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 在Person表中添加列
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">ADD</span><span class="w"> </span><span class="n">Hobby</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 删除列
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="k">DROP</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">Hobby</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 修改列
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="k">MODIFY</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">Hobby</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w">
</span></code></pre></div><h3 id="auto-increment">AUTO INCREMENT</h3>
<blockquote>
<p>AUTO INCREMENT会在新纪录插入到表中时生成一个唯一的数字</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 把id设置为自增的
</span><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w"></span><span class="n">ID</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">LastName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w"></span><span class="n">FirstName</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">Address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="n">City</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w">
</span><span class="w"></span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c1">-- 设置启始值
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="c1">-- 有了auto-increment字段之后，就不为为那个自增的列设置值了，可以像这样插入
</span><span class="c1"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="p">(</span><span class="n">FirstName</span><span class="p">,</span><span class="n">LastName</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Lars&#39;</span><span class="p">,</span><span class="s1">&#39;Monsen&#39;</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 给已经存在的列添加自增语法
</span><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">Persons</span><span class="w"> </span><span class="n">CHANGE</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="nb">bigint</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">;</span><span class="w">
</span></code></pre></div><h3 id="sql函数">SQL函数</h3>
<h4 id="sql-aggregate-函数">SQL Aggregate 函数</h4>
<p>SQL Aggregate 函数计算从列中取得的值，返回一个单一的值。</p>
<p>有用的 Aggregate 函数：</p>
<p>下面是access_log表</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">access_log</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+-------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">aid</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">site_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">date</span><span class="w">                </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+-------+---------------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">21</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">89</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1001</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">231</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">37</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">871</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">456</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1003</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">496</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">9</span><span class="w"> </span><span class="o">|</span><span class="w">    </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">2131</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span><span class="w"> </span><span class="mi">18</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">56</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">------+---------+-------+---------------------+
</span></code></pre></div><h5 id="avg---返回平均值">AVG() - 返回平均值</h5>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 计算平均访问量
</span><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="k">count</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">CountAverage</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">access_log</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">CountAverage</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1"></span><span class="o">|</span><span class="w">     </span><span class="mi">623</span><span class="p">.</span><span class="mi">2857</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">--------------+
</span><span class="c1">-- 选出访问量大于平均量的
</span><span class="c1"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">site_id</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">access_log</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="k">count</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">access_log</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">site_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------+
</span><span class="c1"></span><span class="o">|</span><span class="w">    </span><span class="mi">1005</span><span class="w"> </span><span class="o">|</span><span class="w">   </span><span class="mi">871</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">1800</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="mi">2131</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+</span><span class="c1">---------+-------+
</span></code></pre></div><ul>
<li>
<p>COUNT() - 返回行数</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="c1">-- 计算总行数
</span><span class="c1"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="nf">COUNT</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">nums</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">access_log</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">nums</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+</span><span class="w">
</span><span class="w"></span><span class="c1">-- 计算大于1000的行数
</span><span class="c1"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="nf">COUNT</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">nums</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">access_log</span><span class="w">
</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">count</span><span class="o">&gt;</span><span class="mi">1000</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="o">+------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">nums</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+</span><span class="w">
</span><span class="w"></span><span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">
</span><span class="w"></span><span class="o">+------+</span><span class="w">
</span><span class="w"></span><span class="mi">1</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 查询所有记录的条数
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">access_log</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 查询websites 表中 alexa列中不为空的记录的条数
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">alexa</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- 查询websites表中 country列中不重复的记录条数
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">country</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">websites</span><span class="p">;</span><span class="w">
</span></code></pre></div></li>
<li>
<p>FIRST() - 返回第一个记录的值</p>
<p>只有MS Access支持FIRST()函数 其他数据库用</p>
<p>mysql有类似的语法</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">ASC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></code></pre></div></li>
<li>
<p>LAST() - 返回最后一个记录的值</p>
<p>只有 MS Access 支持 LAST() 函数</p>
<p>mysql中</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="n">DESCLIMIT</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></code></pre></div></li>
<li>
<p>MAX() - 返回最大值</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">alexa</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">max_alexa</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Websites</span><span class="p">;</span><span class="w">
</span></code></pre></div></li>
<li>
<p>MIN() - 返回最小值</p>
<p>同上</p>
</li>
<li>
<p>SUM() - 返回总和</p>
</li>
</ul>
<h4 id="sql-scalar-函数">SQL Scalar 函数</h4>
<p>SQL Scalar 函数基于输入值，返回一个单一的值。</p>
<p>有用的 Scalar 函数：</p>
<ul>
<li>UCASE() - 将某个字段转换为大写</li>
<li>LCASE() - 将某个字段转换为小写</li>
<li>MID() - 从某个文本字段提取字符，MySql 中使用</li>
<li>SubString(字段，1，end) - 从某个文本字段提取字符</li>
<li>LEN() - 返回某个文本字段的长度</li>
<li>ROUND() - 对某个数值字段进行指定小数位数的四舍五入</li>
<li>NOW() - 返回当前的系统日期和时间</li>
<li>FORMAT() - 格式化某个字段的显示方式</li>
</ul>
<h4 id="group-by">GROUP BY</h4>
<p>GROUP可以进行分组查询</p>
<h3 id="sql通用数据类型">sql通用数据类型</h3>
<table>
<thead>
<tr>
<th style="text-align:left">数据类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">CHARACTER(n)</td>
<td style="text-align:left">字符/字符串。固定长度 n。</td>
</tr>
<tr>
<td style="text-align:left">VARCHAR(n) 或 CHARACTER VARYING(n)</td>
<td style="text-align:left">字符/字符串。可变长度。最大长度 n。</td>
</tr>
<tr>
<td style="text-align:left">BINARY(n)</td>
<td style="text-align:left">二进制串。固定长度 n。</td>
</tr>
<tr>
<td style="text-align:left">BOOLEAN</td>
<td style="text-align:left">存储 TRUE 或 FALSE 值</td>
</tr>
<tr>
<td style="text-align:left">VARBINARY(n) 或 BINARY VARYING(n)</td>
<td style="text-align:left">二进制串。可变长度。最大长度 n。</td>
</tr>
<tr>
<td style="text-align:left">INTEGER(p)</td>
<td style="text-align:left">整数值（没有小数点）。精度 p。</td>
</tr>
<tr>
<td style="text-align:left">SMALLINT</td>
<td style="text-align:left">整数值（没有小数点）。精度 5。</td>
</tr>
<tr>
<td style="text-align:left">INTEGER</td>
<td style="text-align:left">整数值（没有小数点）。精度 10。</td>
</tr>
<tr>
<td style="text-align:left">BIGINT</td>
<td style="text-align:left">整数值（没有小数点）。精度 19。</td>
</tr>
<tr>
<td style="text-align:left">DECIMAL(p,s)</td>
<td style="text-align:left">精确数值，精度 p，小数点后位数 s。例如：decimal(5,2) 是一个小数点前有 3 位数，小数点后有 2 位数的数字。</td>
</tr>
<tr>
<td style="text-align:left">NUMERIC(p,s)</td>
<td style="text-align:left">精确数值，精度 p，小数点后位数 s。（与 DECIMAL 相同）</td>
</tr>
<tr>
<td style="text-align:left">FLOAT(p)</td>
<td style="text-align:left">近似数值，尾数精度 p。一个采用以 10 为基数的指数计数法的浮点数。该类型的 size 参数由一个指定最小精度的单一数字组成。</td>
</tr>
<tr>
<td style="text-align:left">REAL</td>
<td style="text-align:left">近似数值，尾数精度 7。</td>
</tr>
<tr>
<td style="text-align:left">FLOAT</td>
<td style="text-align:left">近似数值，尾数精度 16。</td>
</tr>
<tr>
<td style="text-align:left">DOUBLE PRECISION</td>
<td style="text-align:left">近似数值，尾数精度 16。</td>
</tr>
<tr>
<td style="text-align:left">DATE</td>
<td style="text-align:left">存储年、月、日的值。</td>
</tr>
<tr>
<td style="text-align:left">TIME</td>
<td style="text-align:left">存储小时、分、秒的值。</td>
</tr>
<tr>
<td style="text-align:left">TIMESTAMP</td>
<td style="text-align:left">存储年、月、日、小时、分、秒的值。</td>
</tr>
<tr>
<td style="text-align:left">INTERVAL</td>
<td style="text-align:left">由一些整数字段组成，代表一段时间，取决于区间的类型。</td>
</tr>
<tr>
<td style="text-align:left">ARRAY</td>
<td style="text-align:left">元素的固定长度的有序集合</td>
</tr>
<tr>
<td style="text-align:left">MULTISET</td>
<td style="text-align:left">元素的可变长度的无序集合</td>
</tr>
<tr>
<td style="text-align:left">XML</td>
<td style="text-align:left">存储 XML 数据</td>
</tr>
</tbody>
</table>
<p>MYSQL的数据类型</p>
<table>
<thead>
<tr>
<th style="text-align:left">数据类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">CHAR(size)</td>
<td style="text-align:left">保存固定长度的字符串（可包含字母、数字以及特殊字符）。在括号中指定字符串的长度。最多 255 个字符。</td>
</tr>
<tr>
<td style="text-align:left">VARCHAR(size)</td>
<td style="text-align:left">保存可变长度的字符串（可包含字母、数字以及特殊字符）。在括号中指定字符串的最大长度。最多 255 个字符。**注释：**如果值的长度大于 255，则被转换为 TEXT 类型。</td>
</tr>
<tr>
<td style="text-align:left">TINYTEXT</td>
<td style="text-align:left">存放最大长度为 255 个字符的字符串。</td>
</tr>
<tr>
<td style="text-align:left">TEXT</td>
<td style="text-align:left">存放最大长度为 65,535 个字符的字符串。</td>
</tr>
<tr>
<td style="text-align:left">BLOB</td>
<td style="text-align:left">用于 BLOBs（Binary Large OBjects）。存放最多 65,535 字节的数据。</td>
</tr>
<tr>
<td style="text-align:left">MEDIUMTEXT</td>
<td style="text-align:left">存放最大长度为 16,777,215 个字符的字符串。</td>
</tr>
<tr>
<td style="text-align:left">MEDIUMBLOB</td>
<td style="text-align:left">用于 BLOBs（Binary Large OBjects）。存放最多 16,777,215 字节的数据。</td>
</tr>
<tr>
<td style="text-align:left">LONGTEXT</td>
<td style="text-align:left">存放最大长度为 4,294,967,295 个字符的字符串。</td>
</tr>
<tr>
<td style="text-align:left">LONGBLOB</td>
<td style="text-align:left">用于 BLOBs (Binary Large OBjects)。存放最多 4,294,967,295 字节的数据。</td>
</tr>
<tr>
<td style="text-align:left">ENUM(x,y,z,etc.)</td>
<td style="text-align:left">允许您输入可能值的列表。可以在 ENUM 列表中列出最大 65535 个值。如果列表中不存在插入的值，则插入空值。**注释：**这些值是按照您输入的顺序排序的。可以按照此格式输入可能的值： ENUM(&lsquo;X&rsquo;,&lsquo;Y&rsquo;,&lsquo;Z&rsquo;)</td>
</tr>
<tr>
<td style="text-align:left">SET</td>
<td style="text-align:left">与 ENUM 类似，不同的是，SET 最多只能包含 64 个列表项且 SET 可存储一个以上的选择。</td>
</tr>
</tbody>
</table>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-01-03</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/sql/">SQL</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/myisam%E5%92%8Cinnodb%E7%9A%84%E5%8C%BA%E5%88%AB/" class="prev" rel="prev" title="MyISAM和InnoDB的区别"><i class="fas fa-angle-left fa-fw"></i>MyISAM和InnoDB的区别</a>
            <a href="/posts/%E5%85%B3%E4%BA%8E%E5%A0%86%E5%86%85%E5%AD%98%E5%92%8C%E6%A0%88%E5%86%85%E5%AD%98/" class="next" rel="next" title="关于堆内存和栈内存">关于堆内存和栈内存<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">氕氘氚</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp">苏ICP备2020068321</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"search":{"highlightTag":"em","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
